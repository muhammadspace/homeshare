# REST API Endpoints
## POST
| **Endpoint**                        | **Description**                                          | **Request Body**                                                                                                                                                                                                                       | **Response**                                                                                                             | **Authorization required** | **Notes**                                                                                                                                                                                      |
| ----------------------------------- | -------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ | -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `/recommend/owner`                  | Recommends owners to a seeker? _**need clarification**_  | `target_user`: id of the user _**(need clarification on whose `id` it is)**_                                                                                                                                                           | JSON array of `{ "common_interests": decimal, "id": integer, "similarity": decimal }`                                    | - [ ]                      | Response is an array of owners, sorted by `similarity`, from highest to lowest.                                                                                                                |
| `/recommend/seeker`                 | Recommends seekers to an owner? _**need clarification**_ | `seeker_id`: id of the seeker                                                                                                                                                                                                          | JSON array of `{ "apts": [], "common_interests": decimal, "id": integer}`.                                               | - [ ]                      | Response is an array of seekers, sorted by `common_interests`, from highest to lowest. _**(need clarification on what `id` refers to. Is it the owner of the apartments or another seeker?)**_ |
| `/login`                            |                                                          | `email` and `password`                                                                                                                                                                                                                 | `{ status: true/false, success: success/failure message }`                                                               | - [ ]                      |                                                                                                                                                                                                |
| `/registration`                     |                                                          | `username`, `email`, `password`, `picture`, `dob`, `job`, `move_in_date`, `type`, `interests` & `traits`: array of strings, and `gender`                                                                                               | `{ success: boolean, message: success/error message string }`                                                            | - [ ]                      |                                                                                                                                                                                                |
| `/profile`                          | Update the logged-in user's information                  | The fields to update and their new values                                                                                                                                                                                              |                                                                                                                          | - [x]                      |                                                                                                                                                                                                |
| `/invite`                           | Generates an invite                                      | `to`: recepient ID, `from`: sender ID, `apt`: apartment ID                                                                                                                                                                             | Same as in request body, but also includes `id`: the newly created invite's ID, `rejected`: boolean, `accepted`: boolean | - [ ]                      |                                                                                                                                                                                                |
| `/invite/:inviteid/<accept/reject>` | Reject or accept the invite with ID `inviteid`           |                                                                                                                                                                                                                                        | `success`: boolean, `message`                                                                                            | - [ ]                      |                                                                                                                                                                                                |
| `/apt`                              | Create a new apartment                                   | `location`: string, `owner`: id, `price`, `max`: number, `rooms`, `bedrooms`: number, `furnished`: boolean, `residents`: (optional) array of IDs of current residents, `invites`: (optional) array of IDs of invites to this apartment | Same as request body but includes `id`: newly created apt's ID, `available`: boolean, default false                      | - [ ]                      |                                                                                                                                                                                                |
| `/apt/join/:aptid`                  | Adds the logged-in user to apartment with id `aptid`     |                                                                                                                                                                                                                                        |                                                                                                                          | - [x]                      | If the number of residents in the apartment is not less than the apartment's `max` the user won't be able to join the aparmtent.                                                               |
| `/apt/kick`                         | Removes a resident from the apartment                    | `resident`: id, `apt`: id                                                                                                                                                                                                              | `{ success: boolean, message: string }`                                                                                  | - [x]                      | The token of the owner of th apartment must be included                                                                                                                                        |
---
<br>

## GET
| **Endpoint**        | **Description**                               | **Request Body**                                                                                                                  | **Response**                                                                                                                                                          | **Authorization required** | **Notes** |
| ------------------- | --------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------- | --------- |
| `/invite/:inviteid` | Gets information of invite with ID `inviteid` |                                                                                                                                   | `id`: invite ID, `to`: recepient ID, `from`: sender ID, `apt`: apartment ID, `rejeceted`: boolean, `accepted`: boolean                                                | - [ ]                      |           |
| `/user/:id`         | Gets information of user                      |                                                                                                                                   | `username`, `picture`, `dob`, `job`, `gender`, `move_in_date`, `type`, `interests`, `traits`, `owned_apts`, `resident_apts`                                           | - [ ]                      |           |
| `/profile`          | Gets all information of the logged-in user    | Request body is empty but the request headers should have an `Authorization` header that starts with `Bearer ` and then the token | `interests`, `traits`, `_id`, `username`, `email`, `dob`, `job`, `gender`, `move_in_date`, `type`, `invites`, `createdAt`, `updatedAt`, `owned_apts`, `resident_apts` | - [x]                      |           |

---
<br>

# TODO
- [ ] implement user update endpoint
- [x] implement user get information endpoint
- [ ] fix the Flask implementation of seeker recommendations such that it includes `apts`
- [ ] replace the local datasets with MongoDB 
- [ ] implement jwt token authorization for invites